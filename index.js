'use strict;'
const A0={viewport:null,viewport_width:0,pages_container:null,nr_pages:0,lst_pages:null,current_page_idx:0,previous_page_idx:0,client_onResize:null,client_onClick:null,mouse_or_touch:null,PAGE_FREE:0,PAGE_LANDSCAPE:1,PAGE_PORTRAIT:-1,page_before_rotate:-1,page_mode:0,page_rotate_id:0,error_node:null,error_page:null,f28:function(t,s){this.viewport=document.getElementById("AppViewport"),this.pages_container=document.getElementById("AppPagesContainer"),this.lst_pages=Array.from(document.querySelectorAll(".AppPage")),this.nr_pages=this.lst_pages.length,window.hasOwnProperty("cordova")?this.mouse_or_touch="mousedown":this.mouse_or_touch=void 0!==window.ontouchstart?"touchstart":"mousedown",A0.f22(null),this.client_onResize=t||null,this.client_onClick=s||null,window.visualViewport.addEventListener("resize",A0.f22.bind(this))},f22:function(t){this.viewport_width=this.viewport.offsetWidth,this.viewport.style.height=window.visualViewport.height+"px",this.pages_container.style.width=this.nr_pages*this.viewport_width+"px",this.pages_container.style.left=-this.current_page_idx*this.viewport.offsetWidth+"px",this.lst_pages.forEach(t=>t.style.width=this.viewport_width+"px"),this.f9(),this.f12(),null!==this.client_onResize&&this.client_onResize(this.viewport_width,this.viewport.offsetHeight)},f23:function(){return this.viewport_width},f19:function(){return this.viewport.offsetHeight},f24:function(t=""){if("string"==typeof t){var s=0,i=t,h=!1;for(t=this.current_page_idx;s<this.nr_pages;){if(this.lst_pages[s].id===i){t=s,h=!0;break}s++}if(!h)return this.current_page_idx}return this.pages_container.style.left=-t*this.viewport.offsetWidth+"px",this.previous_page_idx=this.current_page_idx,this.current_page_idx=t},f10:function(){return this.current_page_idx},f4:function(){return this.lst_pages[this.current_page_idx].id},f9:function(){this.f24(this.current_page_idx)},f5:function(){this.f24(this.current_page_idx)},f14:function(t,s){this.page_mode=t,this.page_rotate_id=s,this.f12()},f12:function(){return this.show_page=!1,this.page_mode!==this.PAGE_FREE&&(Math.sign(this.viewport.offsetWidth-this.viewport.offsetHeight)!==this.page_mode?(-1===this.page_before_rotate&&(this.page_before_rotate=this.current_page_idx),this.f24(this.page_rotate_id),this.show_page=!0):-1!==this.page_before_rotate&&(this.f24(this.page_before_rotate),this.page_before_rotate=-1,this.show_page=!0)),this.show_page||this.f9(),this.show_page},f0:function(t,s){t.addEventListener(this.mouse_or_touch,this.f25.bind(this,s)),t.addEventListener("contextmenu",this.f11.bind(this))},f6:function(t,s,i){"mousedown"===(s="MOUSE||TOUCH"===s?this.mouse_or_touch:s)&&t.addEventListener("contextmenu",this.f11.bind(this)),t.addEventListener(s,i)},f13:function(t){return t.stopPropagation(),t.preventDefault(),t.target},f25:function(t,s){this.f13(s),null!==this.client_onClick&&this.client_onClick(t,s.target)},f11:function(t){this.f13(t),t.target.click()},f1:function(t){if("serviceWorker"in navigator&&"https:"===window.location.protocol&&void 0===window.cordova){if(this.A1&&!this.A1.f26())return;navigator.serviceWorker.register(t).then(t=>{}).catch(t=>{})}},f7:function(t="AppError"){"string"==typeof t&&(t=document.getElementById(t)),this.error_node=t,this.error_page=g1(t,"section"),window.addEventListener("unhandledrejection",t=>{t.preventDefault(),this.f20("Unhandled rejection",t.reason)}),window.addEventListener("error",t=>{t.preventDefault();t=[t.error.message,t.error.fileName,t.error.lineNumber,this.f2(t.error)].join("<br>");this.f20("Error",t)})},f2:function(t){return t.stack.split(" at ").join("<br>&bull; ")},f20:function(t,s){this.error_node.innerHTML+="<h3>"+t+"</h3>"+s,null!==this.error_page&&this.f24(this.error_page.id)}};class C0{#p70=null;#p67=1/0;#p57=1/0;#p48=1/0;#p41=1/0;#p31=null;constructor(t,s=!1){this.#p70=t,!0===s?this.#p31=this.#P26():s instanceof Node&&(this.#p31=s,this.#p31.id=this.#p70,this.#p31.classList.add("FlexBoxEntity"))}#P26(){var t=document.createElement("div");return t.id=this.#p70,t.classList.add("FlexBoxEntity"),t}M90(){return this.#p70}M37(){return[this.#p67,this.#p57]}M49(){return this.#p31}f23(){return this.#p48}f19(){return this.#p41}M86(){return this.#p67}M75(){return this.#p57}f22(t,s,i,h){this.M38(i,h),this.M76(t,s)}M38(t,s){this.#p67=t,this.#p57=s,null!==this.#p31&&(this.#p31.style.top=t+"px",this.#p31.style.left=s+"px")}M76(t,s){this.#p48=t,this.#p41=s,null!==this.#p31&&(this.#p31.style.width=t+"px",this.#p31.style.height=s+"px")}}class E3 extends C0{#p9=null;#p32=null;#p49=null;#p8=[];constructor(t,s,i,h,e=!1){super(t,e),this.#p9=s,this.#p32=i,this.#p49=h,e&&this.M49().classList.add("FlexBox")}M59(t,s=!0){this.#p8[s?"push":"unshift"](t),this.M1()}M28(t){g2(this.#p8,t),this.M1()}f22(t,s,i,h,e=0,p=0){super.f22(t,s,i,h),0<e&&0<p&&this.M7(e,p),this.M1()}M7(s,i){0<this.#p8.length&&this.#p8.forEach(t=>t.M76(s,i))}M1(){var s,i,h,e;0!==this.#p8.length&&(i=s=0,this.#p8.forEach(t=>{s+=t.f23(),i+=t.f19()}),s!==1/0)&&i!==1/0&&("row"===this.#p9?(h=this.#P4(this.#p32)(!0,"width",s),e=this.#P4(this.#p49)(!1,"height",i)):(e=this.#P4(this.#p32)(!0,"height",i),h=this.#P4(this.#p49)(!1,"width",s)),this.#p8.forEach(t=>{t.M38(e.shift(),h.shift())}))}M24(s){this.#p8.forEach(t=>s(t))}#P4(t){return"center"===t?this.#P0.bind(this):"start"===t?this.#P2.bind(this):"end"===t?this.#P3.bind(this):"evenly"===t?this.#P1.bind(this):void 0}#P5(t,s){for(var i,h="width"===s?this.M75():this.M86(),e=[],p=0;p<this.#p8.length;++p)t&&0<p&&(i=this.#p8[p-1],h+="width"===s?i.f23():i.f19()),e.push(h);return e}#P2(t,s,i){return this.#P5(t,s)}#P0(t,s,i){for(var h,e=this.#P5(t,s),p=this.#p8.length,n="width"===s?this.f23():this.f19(),r=Math.round((n-i)/2),o=0;o<p;++o)t?e[o]+=r:(h=this.#p8[o],e[o]+=Math.round((n-("width"===s?h.f23():h.f19()))/2));return e}#P3(t,s,i){for(var h,e=this.#P5(t,s),p=this.#p8.length,n="width"===s?this.f23():this.f19(),r=Math.round(n-i),o=0;o<p;++o)t?e[o]+=r:(h=this.#p8[o],e[o]+=n-("width"===s?h.f23():h.f19()));return e}#P1(t,s,i){for(var h=this.#P5(t,s),e=this.#p8.length,t="width"===s?this.f23():this.f19(),p=Math.round((t-i)/(e+1)),n=0;n<e;++n)h[n]+=(n+1)*p;return h}M8(t){this.#p8=t(this.#p8)}}function g14(t){return document.getElementById(t)}function g12(t,s){return(s=s||document).getElementsByTagName(t)[0]}function g13(t,s){return(s=s||document).getElementsByTagName(t)}function g10(t,s=document){return s.querySelector(t)}function g11(t,s=document){return s.querySelectorAll(t)}function g1(t,s){for(s=s.toUpperCase();null!==t&&t.tagName!==s;)t=t.parentNode;return t}function g15(i,h=null){return new Promise((t,s)=>setTimeout(t,i,h))}function g6(s,t){t.forEach(t=>null!==t&&s.appendChild(t))}function g3(t,s=null,i=null,h=null){t=new URL(window.location).searchParams.get(t);return null===t||(null!==i&&"string"!==i&&("int"===i?t=e(t=parseInt(t,10),h):"float"===i?t=e(t=parseFloat(t,10),h):"boolean"===i?t=Boolean(parseInt(t,10)):"uppercase"===i?t=t.toUpperCase():"lowercase"===i&&(t=t.toLowerCase())),["string","uppercase","lowercase"].includes(i)&&null!==h&&!h.includes(t))?s:t;function e(t,s){var i;return null!==s&&(i=s[0],s=s[1],t<i?t=i:s<t&&(t=s)),t}}function g9(t,s){t=getComputedStyle(document.documentElement).getPropertyValue("--"+t.split("--").pop()).trim();return s?parseInt(t,10):t}function g7(t){for(var s=t.length-1;0<s;s--){var i=Math.floor(Math.random()*(s+1)),h=t[s];t[s]=t[i],t[i]=h}}function g8(t){return t.concat()}function g2(t,s){return t.includes(s)?t.splice(t.indexOf(s),1).pop():null}function g4(t,s){return s>=t.length?null:t.splice(s,1).pop()}function g0(t){return g4(t,Math.f21(0,t.length-1))}function g5(t){return t[Math.f21(0,t.length-1)]}A0.A1={},A0.A1.f26=function(){return 0<navigator.maxTouchPoints},A0.A1.f29=function(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document},A0.A1.f3=function(){document.fullscreenElement||!this.f26()||this.f29()||document.documentElement.requestFullscreen instanceof Function&&document.documentElement.requestFullscreen({navigationUI:"hide"})},A0.Storage={prefix:null,obj:null},A0.Storage.f28=function(t){this.prefix=t,this.obj=window.localStorage},A0.Storage.f27=function(){},A0.Storage.f18=function(t){this.obj.removeItem(this.prefix+"_"+t)},A0.Storage.f15=function(t,s){this.obj.setItem(this.prefix+"_"+t,JSON.stringify(s))},A0.Storage.f16=function(t){return JSON.parse(this.obj.getItem(this.prefix+"_"+t))},A0.Storage.f8=function(t,s){var i=this.f16(t);if(null===i)this.f15(t,s);else for(var h in i)s.hasOwnProperty(h)&&(s[h]=i[h]);return null!==i},Math.f21=function(t,s){return Math.floor(Math.random()*(s-t+1))+t},Math.f17=function(t,s){return t+Math.random()*(s-t)};class E4 extends C0{#p70=null;#p58=-1;#p50=-1;#p51=-1;#p33=!0;#p24=!1;#p0=!0;#p25=null;#p42=null;#p43=null;#p44=null;#p11=null;#p34=null;#p45=null;constructor(t,s,i){super("Card_"+t,!0),this.#p70=t,this.#p58=s.id,this.#p50=i.nr,this.#p51=s.color,this.M67(i.symbol,i.nr),this.#p58===k11?this.#p45.innerHTML="<img src='images/triton-head.svg'>":this.#p58===k5?this.#p45.innerHTML="<img src='images/daemon-skull.svg'>":this.#p58===k4?this.#p45.innerHTML="<img src='images/health-potion.svg'>":this.#p58===k3&&(this.#p45.innerHTML="<img src='images/sword-spin.svg'>"),this.#p34.classList.add("Suit_"+k13[this.#p58]),this.#p43.classList.add("Suit_"+k13[this.#p58])}M14(){return this.#p42}M67(t,s){this.#p42=document.createElement("div"),this.#p42.classList.add("CardBody"),this.#p42.classList.add("Clickable"),this.#p43=document.createElement("div"),this.#p43.classList.add("CardFace"),this.#p42.appendChild(this.#p43),this.#p44=document.createElement("div"),this.#p44.classList.add("CardBack"),this.#p42.appendChild(this.#p44),this.#p34=document.createElement("p"),this.#p34.classList.add("CardValue"),this.#p34.classList.add("CardValue"+this.#p51);var i=document.createElement("span"),s=(i.innerHTML=s,this.#p34.appendChild(i),this.#p43.appendChild(this.#p34),this.#p11=document.createElement("span"),this.#p34.appendChild(this.#p11),this.#p45=document.createElement("p"),this.#p45.classList.add("CardSuit"),this.#p45.classList.add("CardSuit"+this.#p51),this.#p43.appendChild(this.#p45),this.#p33||this.#p42.classList.add("FaceDown"),this.M49());s.classList.add("Card"),s.classList.add("CardSmooth"),s.appendChild(this.#p42)}M68(){return this.#p50}M77(){return this.#p58}M69(){return this.#p51}M76(t,s){super.M76(t,s),this.#p34.style.fontSize=Math.round(.3*t)+"px",this.#p34.children.length&&(this.#p34.children[1].style.fontSize=Math.round(.2*t)+"px"),this.#p45.style.fontSize=Math.round(.4*t)+"px";s=g12("img",this.#p45);null!==s&&(s.style.width=s.style.height=Math.round(.75*t)+"px")}M60(t){this.#p33=t,this.#p42.classList[t?"remove":"add"]("FaceDown")}M39(t){this.#p24=t,this.#p42.classList[t?"add":"remove"]("CardSelected")}M15(){return this.M39(!this.#p24),this.#p24}M40(t){this.#p25=t}M94(t){return this.#p25===t}M41(){return this.#p25}M78(){return[k14,k7,k15].includes(this.#p50)}M50(){return this.M78()}M79(){return this.#p50===k6}M91(){return this.#p50===k19}M70(){return this.#p33}M51(){return this.#p24}M61(t){this.M49().classList[t?"add":"remove"]("CardHidden")}M62(t){this.M49().classList[t?"add":"remove"]("CardSmooth")}M63(t){this.M49().style.zIndex=t}M29(){return this.M78()||this.M91()}M92(){return this.#p58===k4||this.#p58===k3}M80(){return this.#p58===k5||this.#p58===k11}M71(){return this.#p58===k4}M52(){return this.#p58===k3}}class C2{#p26=null;#p17=null;#p59=null;#p60=null;#p61=!1;#p62=null;#p12=null;#p35=null;#p36=null;#p63=null;#p52=null;#p27=!0;#p28=-1;#p53=0;#p18=!1;constructor(){this.clicked_card=null,A0.f28(this.#P35.bind(this),this.#P38.bind(this)),A0.f7(),A0.Storage.f28("scoundrel"),this.#P27(),this.#p26=g14("GameViewport"),this.#p17=new C1(k17),this.#p59=new C5(g14("MenuPannel"),g14("MenuIcon")),this.#p60=new C4(k18),this.#p12=new E2("CardPiles"),this.#p62=this.#p12.M48(),this.#p36=this.#p12.M23(),this.#p35=new E1("Dungeon",k2),this.#p63=new E1("Hand",1/0),this.#p52=new C3(g14("InGameInfo"),k10,k9),g14("Play").appendChild(this.#p17.M49()),this.#p26.appendChild(this.#p35.M49()),this.#p26.appendChild(this.#p63.M49()),g6(this.#p26,this.#p12.M45()),A0.f6(window,"contextmenu",A0.f13.bind(A0)),A0.f0(g14("HomeCard"),null),A0.f0(g14("MenuIcon"),null),this.#p59.M45().forEach(t=>A0.f0(t,null)),A0.f0(this.#p62.M14(),this.#p62),A0.f0(this.#p36.M14(),this.#p36),this.#p63.M32(!0),A0.f0(this.#p63.M14(),this.#p63),this.#p59.M96(),this.#P35(0,0),this.#P32(),g14("AppViewport").classList.remove("AppInit"),this.Stats=this.#p52;var t=g3("goto",null);null!==t&&(A0.f24(t),this.#p59.M74(!0))}#P27(){REDS_MAX=g3("reds_max",REDS_MAX,"int",[10,14]),Array.from(g13("input",g14("REDS_MAX"))).forEach(t=>{parseInt(t.value,10)===REDS_MAX&&(t.checked=!0),t.addEventListener("change",t=>{window.location=location.href.split("?").shift()+"?goto=Play&reds_max="+t.target.value})})}#P32(){var t;for(this.#p60.M33(t=>t.M79()||t.M69()===k20&&t.M68()>REDS_MAX);null!==(t=this.#p60.M84());)this.#p26.appendChild(t.M49()),A0.f0(t.M14(),t),this.#p36.M81(t)}#P35(t,s){var i=this.#p26.offsetTop,h=this.#p26.offsetWidth,e=Math.round(h/6),p=Math.round(this.#p26.offsetHeight/4),[e,n]=this.#P24(e,p,i);this.#p60.M35(e,n),this.#p17.f22(h,Math.round(n/2),0,this.#p26.offsetLeft),this.#p12.f22(h,p,0,0,e,n),this.#p35.f22(h,p,p,0),this.#p63.f22(h,p,2*p,0),this.#p52.f22(h,p-i)}#P24(t,s,i){var i=+i,t=t-i,h=Math.round(t*k1);return s-i<h&&(h=s-i,t=Math.round(h/k1)),[t,h]}#P10(t,s,i){if(0===s)return Promise.resolve(null);for(var h=[],e=k0*t,p=0;0<s--;)h.push(g15(p).then(t=>{i()})),p+=e;return h.push(g15(p-e+k0)),Promise.all(h)}#P8(s,i,t,h=!0){return this.#P10(.5,Math.min(t,s.M53()),t=>{i.M81(s.M19(),h)})}#P6(){this.#p60.M44(t=>t.M62(!1)),this.#p62.M11(this.#p36),this.#p35.M55(this.#p36),this.#p63.M55(this.#p36),setTimeout(t=>this.#p60.M44(t=>t.M62(!0)),0)}#P13(t,s){for(var i;0<t.length;)(i=t.pop()).M41().M54(i),s.M81(i)}#P25(){this.#P13(this.#p60.M4(),this.#p62)}#P40(t){this.#p17.M46(t)}#P38(t,s){return this.#p59.IsIcon(s)?this.#P14(s.id.split("_").pop()):"HomeCard"===s.id?this.#P14("Play"):void(this.#p61||this.#p18||(t instanceof E4?this.#P28(t):t instanceof E0?this.#P15(t):t===this.#p63?this.#P29():t===this.#p35&&this._NewDungeon()))}#P14(t){"MenuIcon"===t?this.#p59.M88():"Play"===t?"Play"===A0.f4()?this.#P39():(this.#p59.M74(!0),this.#p59.M95(),A0.f24("Play")):"Home"===t?(this.#p59.M96(),this.#p59.M74(!1),A0.f24("Home")):A0.f24(t)}#P28(t){this.clicked_card=t,this.#p61||(t.M70()?t.M94(this.#p63)?this.#P29():t.M80()?this.#P20(t):t.M71()?this.#P21(t):this.#P22(t):this.#P15(t.M41()))}#P15(t){this.#p61||(t===this.#p36?this.#P16():this.#P41())}#P29(){var t,s=this.#p35.M12();null!==s?(this.#p35.M0(),0!==(t=this.#p63.M43(s))?1===t?this.#P40("Hand &raquo; First card must be a weapon."):2===t?this.#P40("Hand &raquo; Card must be a monster."):t<0&&this.#P40("Hand &raquo; Monster value must be &lt; "+Math.abs(t)):(this.#P7(s,this.#p63,!1),s.M80()&&((t=this.#p63.M20()-s.M68())<0?0===this.#p52.M36(t)&&this.#P37(!1):this.#p52.M2()),this.#P11())):0===this.#p63.M53()?this.#P40("Hand &raquo; Select a weapon from the dungeon."):this.#P40("Hand &raquo; Select a monster from the dungeon."),this.#p63._Status()}#P20(t){this.#p35.M56(t),(0===this.#p63.M53()||t.M68()>=this.#p63.M57())&&this.#P16()}#P21(t){this.#p27?(this.#p27=!1,this.#p52.M85(!1),this.#p52.M36(t.M68())):this.#p52.M2(),this.#P7(t,this.#p36)}#P22(t){this.#p61=!0,this.#p52.M2(),this.#P10(.33,this.#p63.M53(),()=>{this.#p36.M81(this.#p63.M21())}).then(()=>{this.#P7(t,this.#p63),this.#p61=!1,this.#p63._Status()})}#P39(){this.#p61||(this.#p61=!0,this.#p59.M96(),this.#p17.M96(),this.#p59.M58(!1),this.#p52.M93(),this.#p27=!0,this.#p28=-1,this.#p53=0,this.#p18=!1,this.#P6(),this.#p60.M93(),this.#p60.M83(),this.#P25(),this.#p62.M73(k0),this.#p36.M73(k0),this.#P8(this.#p62,this.#p35,k2,!1).then(()=>{this.#p35.M65(),this.#p59.M58(!0),this.#p61=!1}))}#P7(t,s,i=!0){this.#p35.M54(t),s.M81(t),this.#p52.M89(!1),i&&this.#P11()}#P11(){this.#p18||1<this.#p35.M53()||(0===this.#p35.M53()?this.#P37(!0):0!==this.#p62.M53()&&this.#P36())}#P36(){this.#p18||(this.#p61=!0,this.#p53+=1,this.#p27=!0,this.#p52.M85(!0),this.#p52.M89(1<this.#p53-this.#p28),this.#P8(this.#p62,this.#p35,k2-this.#p35.M53(),!1).then(()=>{this.#p35.M65(),this.#p61=!1}))}#P16(){var t=this.#p35.M12();null===t?this.#P40("Fight barehanded &raquo; Select a monster from the dungeon."):(this.#P7(t,this.#p36,!1),0===this.#p52.M36(-t.M68())?this.#P37(!1):this.#P11())}#P41(){0<=this.#p28&&this.#p53-this.#p28<=1?this.#P40("Run &raquo; No two consecutive rooms can be avoided."):this.#p35.M53()<k2?this.#P40("Run &raquo; Not possible after playing cards."):(this.#p28=this.#p53,this.#p52.M89(!1),this.#p61=!0,this.#P10(.33,k2,()=>{this.#p62.M9(this.#p35.M21())}).then(()=>{this.#p61=!1,this.#P36()}))}#P37(t){this.#p18=!0;var s=0;t?(s=this.#p52.M66(),this.#p35.M6(t=>t.M71()).forEach(t=>s+=t.M68()),this.#p62.M6(t=>t.M71()).forEach(t=>s+=t.M68())):this.#p62.M6(t=>t.M80()).forEach(t=>s-=t.M68()),this.#p17.M47("Game over &raquo; You scored "+s+"."),this.#p52.M27(t,s)}}class E0 extends E3{#p70=null;#p19=[];#p54=0;#p4=!1;#p64=null;#p20=null;constructor(t){super(t,"column","center","center",!0),this.#p70=t,this.#p64=new C0(this.#p70+"_Base",!0),this.M59(this.#p64);t=this.#p64.M49();t.classList.add("CardPileBase"),t.classList.add("Clickable"),this.#p20=document.createElement("p"),this.#p20.classList.add("Hidden"),t.appendChild(this.#p20)}M16(){return this.#p64.M49()}M72(){return g8(this.#p19)}M17(t){this.#p4=t,0<this.#p19.length&&this.#p19[this.#p19.length-1].M60(t)}M18(t,s){this.M7(t,s),this.M1(),this.#P12(),this.#p20.style.fontSize=Math.round(.09*t)+"px"}#P12(){const[s,i]=this.#p64.M37();this.#p19.forEach(t=>t.M38(s,i))}M25(){var s=1;this.#p19.forEach(t=>t.M63(s++))}M73(t){this.#p54=t}M30(t){this.M81(t,!0)}M9(t){this.M81(t,!1)}M81(t,s=!0){var i,h;this.#p19.includes(t)||(this.#p19[s?"push":"unshift"](t),this.#p20.innerHTML=this.#p19.length,[i,h]=this.#p64.M37(),t.M39(!1),t.M60(!1),t.M38(i,h),s?t.M63(100+this.#p19.length):t.M63(0),t.M40(this),g15(this.#p54).then(t=>{this.M25(),this.M3()}))}M10(){return this.#p64.M37()}M19(){var t;return 0===this.#p19.length?null:((t=this.#p19.pop()).M63(100+this.#p19.length),t.M61(!1),this.M3(),this.#p20.innerHTML=this.#p19.length,t)}M3(){var t=this.#p19.length-1;if(0<=t){var s=this.#p19[t];for(s.M61(!1),s.M60(this.#p4),--t;0<=t;--t)(s=this.#p19[t]).M61(!0),s.M60(!1)}}M82(){return 0===this.#p19.length}M53(){return this.#p19.length}M54(t){if(this.#p19.includes(t))return g2(this.#p19,t),t.M61(!1),this.#p20.innerHTML=this.#p19.length,this.M3(),t}M42(t){this.#p20.classList[t?"remove":"add"]("Hidden"),t&&(this.#p20.innerHTML=this.#p19.length)}M11(t){for(var s;0<this.#p19.length;)s=this.#p19[0],this.M54(s),t.M81(s)}M14(){return this.#p64.M49()}M31(){1<this.#p19.length&&(g7(this.#p19),this.M25(),this.M3())}M64(t){this.M49().classList[t?"add":"remove"]("Highlight")}M6(t){return this.#p19.filter(t)}}class E1 extends E3{#p70=null;#p21=0;#p19=[];#p37=!1;#p5=null;#p46=0;#p38=1/0;constructor(t,s){super(t,"row",isNaN(parseInt(s,10))?"center":"evenly","center",!0),this.#p70=t,this.#p21=s,this.#p37=isNaN(parseInt(s,10))}M87(){return this.#p37}f22(t,s,i,h){super.f22(t,s,i,h)}M32(t){this.M49().classList[t?"add":"remove "]("Clickable")}M14(){return this.M49()}M81(t,s=!0){if(this.#p19.length!==this.#p21&&!this.#p19.includes(t))return t.M40(this),t.M60(!0),t.M63(100+this.#p19.length),s?(t.M52()?this.#p46=t.M68():t.M80()&&(this.#p38=t.M68()),this.#p19.push(t)):this.#p19.unshift(t),this.M59(t,s),!0}M54(t){if(this.#p19.includes(t))return g2(this.#p19,t),this.M28(t),t===this.#p5&&(t.M39(!1),this.#p5=null),this.#p37&&0===this.#p19.length&&(this.#p46=0,this.#p38=1/0),t}M55(t){for(var s;0<this.#p19.length;)s=this.#p19[0],this.M54(s),t.M81(s);this.#p37&&(this.#p46=0,this.#p38=1/0)}M6(t){return this.#p19.filter(t)}M56(t){null!==this.#p5&&(this.#p5.M39(!1),this.#p5===t)?this.#p5=null:(this.#p5=t,this.#p5.M39(!0))}M12(){return this.#p5}M0(){null!==this.#p5&&(this.#p5.M39(!1),this.#p5=null)}M53(){return this.#p19.length}M72(){return g8(this.#p19)}_Status(){}M43(t){if(0===this.#p19.length){if(!t.M52())return 1}else{if(!t.M80())return 2;if(t.M68()>=this.#p38)return-this.#p38}return 0}M57(){return this.#p38}M20(){return this.#p46}M21(){return this.M54(this.#p19[this.#p19.length-1])}M65(){this.M8(t=>(this.#p19=t.sort((t,s)=>{if(s.M92()||t.M92()){if(s.M92()&&!t.M92())return 1;if(t.M92()&&!s.M92())return-1;if(s.M77()!==t.M77())return Math.sign(s.M77()-t.M77())}return Math.sign(s.M68()-t.M68())}),g8(this.#p19))),this.M1()}}class C4{#p19=[];#p6=[];#p22=0;#p10=0;constructor(t){this.#p22=t,this.#P33()}#P33(){for(var t,s,i,h=0,e=[],p=0;p<4;++p)for(i=this.M34(p),e.includes(i)||e.push(i),s=2;s<=14;++s)t=new E4(h++,{id:p,symbol:this.M26(p),color:i},{nr:s,symbol:this.M22(s)}),this.#p19.push(t),this.#p10+=1;for(var n=0,r=1;r<=this.#p22;++r)t=new E4(h++,{id:k12,symbol:this.M26(k12),color:e[n]},{nr:k6,symbol:this.M22(k6)}),this.#p19.push(t),this.#p10+=1,n=(1+n)%e.length}M33(t){if(!(0<this.#p6.length))return t=this.#p19.filter(t),this.#p10-=t.length,t.forEach(t=>{g2(this.#p19,t)}),t}f22(s,i){this.M44(t=>t.M76(s,i))}M44(t){this.#p19.forEach(t),this.#p6.forEach(t)}M83(){g7(this.#p19)}M84(){var t;return 0===this.#p19.length?null:(t=g0(this.#p19),this.#p6.push(t),t)}M93(){for(;this.#p6.length;)this.#p19.push(this.#p6.pop())}M26(s){return k21.filter(t=>t.id===s).pop().symbol}M34(s){return k21.filter(t=>t.id===s).pop().color}M22(s){return s===k6||11<=s&&s<=13||s===k19?k16.filter(t=>t.value===s).pop().symbol:s}M35(s,i){this.M44(t=>t.M76(s,i))}M6(t){t=this.#p19.filter(t);return t.forEach(t=>{g2(this.#p19,t),this.#p6.push(t)}),t}M53(){return this.#p19.length}M13(){return this.#p10}M4(){for(var t=[];0<this.#p19.length;){var s=this.#p19.pop();this.#p6.push(s),t.push(s)}return t}}class C5{#p31=null;#p65=null;#lst_elements=null;constructor(t,s){this.#p31=t,this.#p65=s,this.#lst_elements=Array.from(t.children),this.#p65.classList.add("Clickable"),this.#lst_elements.forEach(t=>t.classList.add("Clickable"))}M45(){return g8(this.#lst_elements)}M95(){this.#p31.style.right=0}M96(){this.#p31.style.right=-1.1*this.#p31.offsetWidth+"px"}M88(){"0px"===this.#p31.style.right?this.M96():this.M95()}M74(t=!0){this.#p65.classList[t?"remove":"add"]("Hidden")}IsIcon(t){return t.id.startsWith("Menu")}M58(t){g14("Menu_Play").classList[t?"remove":"add"]("Hidden")}}class C1{#p31=null;#p68=null;#p23=0;#p55=0;constructor(t){this.#p31=document.createElement("div"),this.#p31.id="Messenger",this.#p68=document.createElement("p"),this.#p31.appendChild(this.#p68),this.#p23=t<1e3?1e3*t:t}M49(){return this.#p31}f22(t,s,i,h){this.#p31.style.width=t+"px",this.#p31.style.height=s+"px",this.#p31.style.left=h+"px",this.#p68.style.fontSize=Math.min(Math.round(.25*s),17)+"px",this.M96()}M96(){this.#p31.style.top=-1.1*this.#p31.offsetHeight+"px"}M5(t,s){0<this.#p23&&this.M46("<span>"+t+"</span>: "+s)}M46(t){0<this.#p23&&(clearTimeout(this.#p55),this.#p55=setTimeout(this.M96.bind(this),this.#p23),this.#p68.innerHTML=t,this.#p31.style.top=0)}M47(t){clearTimeout(this.timer),this.#p68.innerHTML=t,this.#p31.style.top=0}}class E2 extends E3{#p70=null;#p62=null;#p36=null;constructor(t){super("PilesRow_"+t,"row","evenly","center",!0),this.#p70=t,this.#p62=new E0(t+"_Draw"),this.#p36=new E0(t+"_Discard"),this.#p36.M42(!0),this.#p62.M42(!0),this.M59(this.#p62),this.M59(this.#p36)}f22(t,s,i,h,e,p){super.f22(t,s,i,h),this.M7(Math.min(Math.round(t/3),s),s),this.M1(),this.M24(t=>{t instanceof E0?t.M18(e,p):t.M49().style.fontSize=Math.round(.12*e)+"px"})}M48(){return this.#p62}M23(){return this.#p36}M45(){return[this.M49(),this.#p62.M49(),this.#p36.M49(),this.#p62.M16(),this.#p36.M16()]}}class C3{#p31=null;#p47=0;#p29=null;#p7=null;#p2=null;#p1=null;#p13=0;#p14=0;#p15=null;#p39=null;#p30=null;#p3=0;#p56=100;#p40=10;#p69="stats";#p66={games_finished:0,games_won:0,lst_last_scores:[],lst_best_scores:[]};constructor(t,s,i){this.#p31=t,this.#p13=s,this.#p14=i,t.appendChild(this.#p7=this.#P34("HealthLeft")),this.#p29=document.createElement("div"),this.#p29.id="Health",t.appendChild(this.#p29),t.appendChild(this.#p2=this.#P34("HealthRight")),this.#p15=document.createElement("div"),this.#p15.innerHTML="--",this.#p29.appendChild(this.#p15),this.#p1=document.createElement("div"),this.#p29.appendChild(this.#p1);s=document.createElement("div");this.#p29.appendChild(s),this.#p39=document.createElement("span"),this.#p39.innerHTML="R",this.#p30=document.createElement("span"),this.#p30.innerHTML="H",s.appendChild(this.#p39),s.appendChild(this.#p30),["latest","best"].forEach(t=>{for(var s,i=g14("lst_"+t+"_scores"),h=0;h<this.#p40;++h)s=document.createElement("p"),i.appendChild(s),s.id=t+"_"+h}),this.#P30()}M93(){this.#p47=this.#p3=this.#p14,this.#p1.innerHTML="",this.M85(!0),this.M89(!0),this.#P31()}M2(){this.#p1.innerHTML=""}#P34(t){var s=document.createElement("div"),t=(s.id=t,document.createElement("div"));return s.appendChild(t),s}f22(t,s){this.#p31.style.height=s+"px";s=Math.round(.4*t*.09);this.#p7.style.fontSize=s+"px",this.#p2.style.fontSize=s+"px"}M36(t){return this.#p47+=t,this.#p1.innerHTML=(0<t?"+":"")+t,this.#p47>this.#p14?this.#p47=this.#p14:this.#p47<this.#p13&&(this.#p47=this.#p13),this.#p3!==this.#p47&&setTimeout(this.#p16.bind(this),this.#p56),this.#p47}#p16=function(){this.#p3+=Math.sign(this.#p47-this.#p3),this.#P31(),this.#p3!==this.#p47&&setTimeout(this.#p16.bind(this),this.#p56)};#P31(){this.#p15.innerHTML=this.#p3;var t=Math.floor(this.#p3/this.#p14*100);g12("div",this.#p7).style.width=t+"%",g12("div",this.#p2).style.width=t+"%"}M89(t){this.#p39.classList[t?"remove":"add"]("Disabled")}M85(t){this.#p30.classList[t?"remove":"add"]("Disabled")}M66(){return this.#p47}M27(t,s){this.#p66.games_finished+=1,t&&(this.#p66.games_won+=1),this.#p66.lst_last_scores.unshift(s),this.#p66.lst_last_scores=this.#p66.lst_last_scores.splice(0,this.#p40),this.#p66.lst_best_scores.push(s),this.#p66.lst_best_scores.sort((t,s)=>s-t),this.#p66.lst_best_scores=this.#p66.lst_best_scores.splice(0,this.#p40),this.#P23(),this.#P19(s)}#P17(t,s,i){for(var h,e=g14("lst_"+t+"_scores").children,p=!1,n=0;n<s.length;n++)e[n].innerHTML=s[n],i===1/0||p||s[n]!==i?e[n].classList.remove("current"):(p=!0,e[n].classList.add("current"));0<s.length&&(h=s.reduce((t,s)=>t+s,0)/s.length,g14("txt_stats_avg_"+t).innerHTML=h.toFixed(2))}#P18(){var t,s={};for(t in this.#p66)s[t]=this.#p66[t];return s}#P23(){A0.Storage.f15(this.#p69,this.#P18())}#P9(t){for(var s in t)this.#p66.hasOwnProperty(s)&&(this.#p66[s]=t[s])}#P30(){var t=this.#P18();A0.Storage.f8(this.#p69,t)&&this.#P9(t),this.#P19(1/0)}#P19(t){g14("txt_stats_finished").innerHTML=this.#p66.games_finished,g14("txt_stats_won").innerHTML=this.#p66.games_won,0<this.#p66.games_finished?g14("txt_stats_winratio").innerHTML=Math.round(this.#p66.games_won/this.#p66.games_finished*100)+"%":g14("txt_stats_winratio").innerHTML="0%",this.#P17("latest",this.#p66.lst_last_scores,t),this.#P17("best",this.#p66.lst_best_scores,t)}}const k1=16/11;var REDS_MAX=10;const k17=5,k18=0,k0=g9("CARD_TRANSLATE_TIME",!0),k2=4,k9=20,k10=0,k4=0,k5=1,k3=2,k11=3,k12=4,k13=["hearts","spades","diamonds","clubs","joker"],k6=0,k14=11,k7=12,k15=13,k19=14,k20="Red",k8="Black",k21=[{id:k4,symbol:"&hearts;",color:k20},{id:k5,symbol:"&spades;",color:k8},{id:k3,symbol:"&diams;",color:k20},{id:k11,symbol:"&clubs;",color:k8},{id:k12,symbol:"",color:""}],k16=[{value:k14,symbol:"J"},{value:k7,symbol:"Q"},{value:k15,symbol:"K"},{value:k19,symbol:"A"},{value:k6,symbol:"&#x2605;"}];window.addEventListener("load",()=>{new C2});